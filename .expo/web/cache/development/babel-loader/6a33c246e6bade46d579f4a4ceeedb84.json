{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { Press } from \"react-native-web/dist/index\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { MaterialCommunityIcons } from \"@expo/vector-icons\";\nimport { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\nimport Login from \"./Login\";\nimport ChatsScreen from \"./chatsscreen\";\nimport ContactScreen from \"./contactscreen\";\nimport ProfileScreen from \"./profilescreen\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Tab = createBottomTabNavigator();\nexport function getUserDetails(_x, _x2) {\n  return _getUserDetails.apply(this, arguments);\n}\nfunction _getUserDetails() {\n  _getUserDetails = _asyncToGenerator(function* (token, user_id) {\n    try {\n      var response = yield fetch('http://localhost:3333/api/1.0.0/user/{user_id}', {\n        method: 'GET',\n        headers: {\n          'X-Authorization': token,\n          user_id: user_id,\n          'Content-Type': 'application/json'\n        }\n      });\n      if (response.ok) {\n        var data = yield response.json();\n      } else {\n        console.log('Error retrieving user details');\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  });\n  return _getUserDetails.apply(this, arguments);\n}\n;\nfunction logout() {\n  return _logout.apply(this, arguments);\n}\nfunction _logout() {\n  _logout = _asyncToGenerator(function* () {\n    var _this = this;\n    console.log(\"Logout\");\n    return fetch('http://localhost:3333/api/1.0.0/logout', {\n      method: 'POST',\n      headers: {\n        'X-Authorization': yield AsyncStorage.getItem(\"whatsthat_session_token\")\n      }\n    }).then(function () {\n      var _ref6 = _asyncToGenerator(function* (response) {\n        if (response.status === 200) {\n          yield AsyncStorage.removeItem(\"whatsthat_session_token\");\n          yield AsyncStorage.removeItem(\"whatsthat_user_id\");\n          _this.props.navigation.navigate(\"Login\");\n        } else if (response.status === 401) {\n          console.log(\"Unauthorised\");\n          yield AsyncStorage.removeItem(\"whatsthat_session_token\");\n          yield AsyncStorage.removeItem(\"whatsthat_user_id\");\n          _this.props.navigation.navigate(\"Login\");\n        } else {\n          throw \"Something went Wrong\";\n        }\n      });\n      return function (_x3) {\n        return _ref6.apply(this, arguments);\n      };\n    }()).catch(function (error) {\n      _this.setState({\n        \"error\": error\n      });\n      _this.setState({\n        \"submitted\": false\n      });\n    });\n  });\n  return _logout.apply(this, arguments);\n}\nfunction main(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    token = _useState2[0],\n    setToken = _useState2[1];\n  useEffect(function () {\n    var getToken = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        try {\n          var value = yield AsyncStorage.getItem('@token');\n          if (value !== null) {\n            setToken(value);\n          }\n        } catch (error) {\n          console.log(error);\n        }\n      });\n      return function getToken() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    getToken();\n  }, []);\n  return _jsxs(Tab.Navigator, {\n    children: [_jsx(Tab.Screen, {\n      name: \"ProfileScreen\",\n      component: ProfileScreen,\n      options: {\n        headerShown: false,\n        tabBarLabel: 'Profile',\n        tabBarIcon: function tabBarIcon(_ref3) {\n          var size = _ref3.size;\n          return _jsx(MaterialCommunityIcons, {\n            name: \"account-circle\",\n            color: \"green\",\n            size: size\n          });\n        }\n      },\n      initialParams: {\n        handleLogout: handleLogout\n      }\n    }), _jsx(Tab.Screen, {\n      name: \"ChatsScreen\",\n      component: ChatsScreen,\n      options: {\n        headerShown: false,\n        tabBarLabel: 'Chats',\n        tabBarIcon: function tabBarIcon(_ref4) {\n          var size = _ref4.size;\n          return _jsx(MaterialCommunityIcons, {\n            name: \"chat\",\n            color: \"green\",\n            size: size\n          });\n        }\n      }\n    }), _jsx(Tab.Screen, {\n      name: \"ContactsScreen\",\n      component: ContactScreen,\n      options: {\n        headerShown: false,\n        tabBarLabel: 'Contacts',\n        tabBarIcon: function tabBarIcon(_ref5) {\n          var size = _ref5.size;\n          return _jsx(MaterialCommunityIcons, {\n            name: \"contacts\",\n            color: \"green\",\n            size: size\n          });\n        }\n      }\n    })]\n  });\n}\nexport default main;","map":{"version":3,"names":["React","useState","useEffect","Press","AsyncStorage","MaterialCommunityIcons","createBottomTabNavigator","Login","ChatsScreen","ContactScreen","ProfileScreen","Tab","getUserDetails","token","user_id","response","fetch","method","headers","ok","data","json","console","log","error","logout","getItem","then","status","removeItem","props","navigation","navigate","catch","setState","main","setToken","getToken","value","headerShown","tabBarLabel","tabBarIcon","size","handleLogout"],"sources":["/Users/shaheryar/Downloads/WhatsThat/src/Main.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Press } from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { MaterialCommunityIcons } from 'react-native-vector-icons';\nimport { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\nimport Login from './Login';\nimport ChatsScreen from './chatsscreen';\nimport ContactScreen from './contactscreen';\nimport ProfileScreen from './profilescreen';\nconst Tab = createBottomTabNavigator();\n\nexport async function getUserDetails(token, user_id) {\n  try {\n    const response = await fetch('http://localhost:3333/api/1.0.0/user/{user_id}', {\n      method: 'GET',\n      headers: {\n        'X-Authorization': token, user_id,\n        'Content-Type': 'application/json',\n      },\n    });\n\n    if (response.ok) {\n      const data = await response.json();\n      // data will contain the user's details, so you can set the state variables to these values\n    } else {\n      console.log('Error retrieving user details');\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\n\n    async function logout(){\n    console.log(\"Logout\")\n\n    return fetch('http://localhost:3333/api/1.0.0/logout', {\n      method: 'POST',\n      headers: {\n        'X-Authorization': await AsyncStorage.getItem(\"whatsthat_session_token\")\n\n      }\n    })\n      .then(async (response) => {\n        if (response.status === 200) {\n          await AsyncStorage.removeItem(\"whatsthat_session_token\")\n          await AsyncStorage.removeItem(\"whatsthat_user_id\")\n          this.props.navigation.navigate(\"Login\")\n        } else if (response.status === 401) {\n          console.log(\"Unauthorised\")\n          await AsyncStorage.removeItem(\"whatsthat_session_token\")\n          await AsyncStorage.removeItem(\"whatsthat_user_id\")\n          this.props.navigation.navigate(\"Login\")\n        } else {\n          throw \"Something went Wrong\"\n        }\n\n      })\n      .catch((error) => {\n        this.setState({ \"error\": error })\n        this.setState({ \"submitted\": false });\n\n      })\n  }\n  function main({ navigation }) {\n    const [token, setToken] = useState(null);\n  \n    useEffect(() => {\n      // Check if user has a token stored in async storage to stay logged in\n      const getToken = async () => {\n        try {\n          const value = await AsyncStorage.getItem('@token');\n          if (value !== null) {\n            setToken(value);\n          }\n        } catch (error) {\n          console.log(error);\n        }\n      };\n  \n      getToken();\n    },\n      []);\n\n  // Render Chats component if user has logged in\n  return (\n    <Tab.Navigator>\n      <Tab.Screen\n        name=\"ProfileScreen\"\n        component={ProfileScreen}\n        options={{\n          headerShown: false,\n          tabBarLabel: 'Profile',\n          tabBarIcon: ({ size }) => (\n            <MaterialCommunityIcons name=\"account-circle\" color=\"green\" size={size} />\n          ),\n        }}\n        initialParams={{ handleLogout: handleLogout }}\n      />\n      <Tab.Screen\n        name=\"ChatsScreen\"\n        component={ChatsScreen}\n        options={{\n          headerShown: false,\n          tabBarLabel: 'Chats',\n          tabBarIcon: ({ size }) => (\n            <MaterialCommunityIcons name=\"chat\" color=\"green\" size={size} />\n          ),\n        }}\n      />\n      <Tab.Screen name=\"ContactsScreen\" component={ContactScreen}\n        options={{\n          headerShown: false,\n          tabBarLabel: 'Contacts',\n          tabBarIcon: ({ size }) => (\n            <MaterialCommunityIcons name=\"contacts\" color=\"green\" size={size} />\n          ),\n        }}\n      />\n    </Tab.Navigator>\n\n  );\n}\nexport default main;"],"mappings":"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"},"metadata":{},"sourceType":"module"}