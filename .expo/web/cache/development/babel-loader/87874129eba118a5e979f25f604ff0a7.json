{"ast":null,"code":"import { addWhitelistedNativeProps } from \"../ConfigHelper\";\nexport function createAnimatedPropAdapter(adapter, nativeProps) {\n  var nativePropsToAdd = {};\n  nativeProps === null || nativeProps === void 0 ? void 0 : nativeProps.forEach(function (prop) {\n    nativePropsToAdd[prop] = true;\n  });\n  addWhitelistedNativeProps(nativePropsToAdd);\n  return adapter;\n}\nexport var SVGAdapter = createAnimatedPropAdapter(function (props) {\n  'worklet';\n\n  var keys = Object.keys(props);\n  if (keys.includes('transform')) {\n    if (Array.isArray(props.transform)) {\n      var _props$x, _props$y;\n      if (props.transform.length !== 6) {\n        throw new Error(\"invalid transform length of \" + props.transform.length + \", should be 6\");\n      }\n      var transform = props.transform;\n      var x = (_props$x = props.x) != null ? _props$x : 0;\n      var y = (_props$y = props.y) != null ? _props$y : 0;\n      props.transform = [{\n        translateX: transform[0] * x + transform[2] * y + transform[4]\n      }, {\n        translateY: transform[1] * x + transform[3] * y + transform[5]\n      }];\n    } else if (typeof props.transform === 'string') {\n      var _transform = props.transform;\n      var arr = _transform.replace('translate(', '').replace(')', '').split(' ');\n      props.transform = [{\n        translateX: parseFloat(arr[0])\n      }, {\n        translateY: parseFloat(arr[1])\n      }];\n    }\n  }\n});\nexport var TextInputAdapter = createAnimatedPropAdapter(function (props) {\n  'worklet';\n\n  var keys = Object.keys(props);\n  if (keys.includes('value')) {\n    props.text = props.value;\n    delete props.value;\n  }\n}, ['text']);","map":{"version":3,"mappings":"AAAA,SAASA,yBAAT;AAGA,OAAO,SAASC,yBAAT,CACLC,OADK,EAELC,WAFK,EAGmB;EACxB,IAAMC,gBAA4C,GAAG,EAArD;EAEAD,WAAW,SAAX,eAAW,WAAX,uBAAW,CAAEE,OAAb,CAAsBC,cAAD,EAAU;IAC7BF,gBAAgB,CAACE,IAAD,CAAhB,GAAyB,IAAzB;EACD,CAFD;EAGAN,yBAAyB,CAACI,gBAAD,CAAzB;EACA,OAAOF,OAAP;AACD;AAID,OAAO,IAAMK,UAAkC,GAAGN,yBAAyB,CACxEO,eAAD,EAAW;EACT;;EACA,IAAMC,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYD,KAAZ,CAAb;EAEA,IAAIC,IAAI,CAACE,QAAL,CAAc,WAAd,CAAJ,EAAgC;IAC9B,IAAIC,KAAK,CAACC,OAAN,CAAcL,KAAK,CAACM,SAApB,CAAJ,EAAoC;MAAA;MAElC,IAAIN,KAAK,CAACM,SAAN,CAAgBC,MAAhB,KAA2B,CAA/B,EAAkC;QAChC,MAAM,IAAIC,KAAJ,kCAC2BR,KAAK,CAACM,SAAN,CAAgBC,MAAO,mBADxD;MAGD;MACD,IAAMD,SAAmB,GAAGN,KAAK,CAACM,SAAlC;MACA,IAAMG,CAAS,eAAIT,KAAK,CAACS,CAAP,uBAAuB,CAAzC;MACA,IAAMC,CAAS,eAAIV,KAAK,CAACU,CAAP,uBAAuB,CAAzC;MACAV,KAAK,CAACM,SAAN,GAAkB,CAChB;QAAEK,UAAU,EAAEL,SAAS,CAAC,CAAD,CAAT,GAAeG,CAAf,GAAmBH,SAAS,CAAC,CAAD,CAAT,GAAeI,CAAlC,GAAsCJ,SAAS,CAAC,CAAD;MAA7D,CADgB,EAEhB;QAAEM,UAAU,EAAEN,SAAS,CAAC,CAAD,CAAT,GAAeG,CAAf,GAAmBH,SAAS,CAAC,CAAD,CAAT,GAAeI,CAAlC,GAAsCJ,SAAS,CAAC,CAAD;MAA7D,CAFgB,CAAlB;IAID,CAdD,MAcO,IAAI,OAAON,KAAK,CAACM,SAAb,KAA2B,QAA/B,EAAyC;MAG9C,IAAMA,UAAiB,GAAGN,KAAK,CAACM,SAAhC;MACA,IAAMO,GAAG,GAAGP,UAAS,CAClBQ,OADS,CACD,YADC,EACa,EADb,EAETA,OAFS,CAED,GAFC,EAEI,EAFJ,EAGTC,KAHS,CAGH,GAHG,CAAZ;MAIAf,KAAK,CAACM,SAAN,GAAkB,CAChB;QAAEK,UAAU,EAAEK,UAAU,CAACH,GAAG,CAAC,CAAD,CAAJ;MAAxB,CADgB,EAEhB;QAAED,UAAU,EAAEI,UAAU,CAACH,GAAG,CAAC,CAAD,CAAJ;MAAxB,CAFgB,CAAlB;IAID;EACF;AAEF,CAnCwE,CAApE;AAsCP,OAAO,IAAMI,gBAAgB,GAAGxB,yBAAyB,CACtDO,eAAD,EAAW;EACT;;EACA,IAAMC,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYD,KAAZ,CAAb;EAEA,IAAIC,IAAI,CAACE,QAAL,CAAc,OAAd,CAAJ,EAA4B;IAC1BH,KAAK,CAACkB,IAAN,GAAalB,KAAK,CAACmB,KAAnB;IACA,OAAOnB,KAAK,CAACmB,KAAb;EACD;AACF,CATsD,EAUvD,CAAC,MAAD,CAVuD,CAAlD","names":["addWhitelistedNativeProps","createAnimatedPropAdapter","adapter","nativeProps","nativePropsToAdd","forEach","prop","SVGAdapter","props","keys","Object","includes","Array","isArray","transform","length","Error","x","y","translateX","translateY","arr","replace","split","parseFloat","TextInputAdapter","text","value"],"sources":["PropAdapters.ts"],"sourcesContent":["import { addWhitelistedNativeProps } from '../ConfigHelper';\nimport { AdapterWorkletFunction } from './commonTypes';\n\nexport function createAnimatedPropAdapter(\n  adapter: AdapterWorkletFunction,\n  nativeProps?: string[]\n): AdapterWorkletFunction {\n  const nativePropsToAdd: { [key: string]: boolean } = {};\n  // eslint-disable-next-line no-unused-expressions\n  nativeProps?.forEach((prop) => {\n    nativePropsToAdd[prop] = true;\n  });\n  addWhitelistedNativeProps(nativePropsToAdd);\n  return adapter;\n}\n\n// ADAPTERS\n\nexport const SVGAdapter: AdapterWorkletFunction = createAnimatedPropAdapter(\n  (props) => {\n    'worklet';\n    const keys = Object.keys(props);\n    // transform\n    if (keys.includes('transform')) {\n      if (Array.isArray(props.transform)) {\n        // case of array with 6 values => https://github.com/react-native-svg/react-native-svg/blob/b2e2c355204ff4b10973d3afce1495f7e4167ff7/src/elements/Shape.tsx#L200\n        if (props.transform.length !== 6) {\n          throw new Error(\n            `invalid transform length of ${props.transform.length}, should be 6`\n          );\n        }\n        const transform: number[] = props.transform as number[];\n        const x: number = (props.x as number) ?? 0;\n        const y: number = (props.y as number) ?? 0;\n        props.transform = [\n          { translateX: transform[0] * x + transform[2] * y + transform[4] },\n          { translateY: transform[1] * x + transform[3] * y + transform[5] },\n        ];\n      } else if (typeof props.transform === 'string') {\n        // case of string 'translate(translateX translateY)'\n        // todo: handle other cases of transform string like here https://github.com/react-native-svg/react-native-svg/blob/b2e2c355204ff4b10973d3afce1495f7e4167ff7/src/lib/extract/extractTransform.ts#L184\n        const transform: string = props.transform as string;\n        const arr = transform\n          .replace('translate(', '')\n          .replace(')', '')\n          .split(' ');\n        props.transform = [\n          { translateX: parseFloat(arr[0]) },\n          { translateY: parseFloat(arr[1]) },\n        ];\n      }\n    }\n    // todo: other props\n  }\n);\n\nexport const TextInputAdapter = createAnimatedPropAdapter(\n  (props) => {\n    'worklet';\n    const keys = Object.keys(props);\n    // convert text to value like RN does here: https://github.com/facebook/react-native/blob/f2c6279ca497b34d5a2bfbb6f2d33dc7a7bea02a/Libraries/Components/TextInput/TextInput.js#L878\n    if (keys.includes('value')) {\n      props.text = props.value;\n      delete props.value;\n    }\n  },\n  ['text']\n);\n"]},"metadata":{},"sourceType":"module"}